# 11.2 キャスト演算子
## 11,2,1 C言語形式のキャスト
C言語ではキャスト演算子は1つしかなく、全ての場合において同じ方法でキャストしていました。
C++ではC言語で使われていたキャストを**C形式キャスト**と呼んで区別します。

```C++
// C言語形式のキャスト
(type-name)expr
```

## 11.2.2 static_cat/ const_cast/ reinterpret_cast
C形式キャストはとても強力であり、全く関係ない型に強引にキャストしてしまうことでバグを生む原因になることがしばしばあります。
C++では、C言語と比べて型を無視したプログラムは推奨されないので、このように危険なC形式キャストは使うべきではありません。
C++では以下の4つのキャスト演算子が定義されています。
```C++
// 4つのキャスト演算子
static_cast<target-type>(expr)

const_cast<target-type>(expr)

reinterpret_cast<target-type>(expr)

dynamic_cast<target-type>(expr)
```

このうち上の3つのキャスト演算子を使うことで、C言語で使われていたキャストの大部分を置き換えることができます。
最後の1つのdynamic_castだけはC++で追加された機能に対して使われるキャスト演算子のため、C言語に対応する機能はありません。

### static_cast
static_castはC++のキャスト演算子の中で最もよく使うキャスト演算子であり、コンパイル時に与えられた型情報に基づいた型変換を行います。最も多い用法は、数値型の変数をサイズや精度の異なった別の数値型へ変換したり、何かのポインター型とvoid*型との相互変換やクラスへの参照やポインターを基底クラスや派生クラスへ変換したりすることでしょう。

### const_cast
const_castは主にポインターや参照からconstを外したり、逆につけたりするために使われます。その際、constのつけ外し以外に他の型への変換が行われるような場合にはエラーとなります。
C++だけでプログラムを組んでいる場合にconst_castが必要となる場合はまずありません。また、予期せぬ動作を起こす動作を起こす可能性があるため、const_castを使ってconstで亡くなったオブジェクトを変更してはいけません。
主にC言語で提供されている関数の呼び出し時に、その関数に渡す実引数の型を合わせるためだけに使用されます。

### interpret_cast
reinterpret_castはstatic_castとconst_castで扱うことのできない型変換を行うキャスト演算子です。例えばポインター型と整数型の直接変換などに使いますが、reinterpret_castが必要になる場合の多くでは、コンパイラーやCPU、メモリといったコンピューターの複雑な部分に対する深い理解が必要となります。
ポインターを実際の型とは無関係の型のポインターや整数型に変換するなど、本来は許されないキャストを行うためについ買うので、reinterpret_castを使わざるを得ないような場合には、その理由をよく理解した上で注意深く必要があります。

std::intptr_tというのは、ポインター型の値を全て表現することができることが保証された、特別な符号付き整数型です。そのため、整数型とポインター型で型変換をする場合には、std::intptr_tを使用することをおすすめします。
